storyteller:
  prefetch_window: 2
  # Optional step mode (uncomment to enable)
  # step_size: 8
  # step_memory_mode: "per_chapter"
  # step_retrieval_concurrency: 8
  tiering:
    enabled: true
    default_tier: "short"
    long_every_n: 20
    long_min_chars: 3500
    long_keyword_triggers:
      - "大战"
      - "突破"
      - "渡劫"
      - "身死"
      - "宗门"
    short:
      narration_ratio: [0.12, 0.20]
      memory_top_k: 2
      include_key_dialogue: false
      include_inner_thoughts: false
      refine_enabled: false
      entity_extract_mode: "fallback"
    medium:
      narration_ratio: [0.20, 0.30]
      memory_top_k: 4
      include_key_dialogue: true
      include_inner_thoughts: false
      refine_enabled: false
      entity_extract_mode: "llm"
    long:
      narration_ratio: [0.40, 0.50]
      memory_top_k: 8
      include_key_dialogue: true
      include_inner_thoughts: true
      refine_enabled: true
      entity_extract_mode: "llm"
